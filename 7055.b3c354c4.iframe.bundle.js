"use strict";(globalThis.webpackChunk_kiwicom_orbit_components=globalThis.webpackChunk_kiwicom_orbit_components||[]).push([[7055],{"./src/Modal/ModalCloseButton/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_ButtonLink__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/ButtonLink/index.tsx"),_icons_Close__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/icons/Close.tsx");const ModalCloseButton=({onClick,dataTest,title})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ButtonLink__WEBPACK_IMPORTED_MODULE_1__.A,{onClick,size:"normal",iconLeft:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_icons_Close__WEBPACK_IMPORTED_MODULE_2__.A,{ariaHidden:!0}),dataTest,type:"secondary",title}),__WEBPACK_DEFAULT_EXPORT__=ModalCloseButton;ModalCloseButton.__docgenInfo={description:"",methods:[],displayName:"ModalCloseButton",props:{onClick:{required:!1,tsType:{name:"Common.Event",elements:[{name:"ReactSyntheticEvent",raw:"React.SyntheticEvent<HTMLButtonElement | HTMLAnchorElement>",elements:[{name:"union",raw:"HTMLButtonElement | HTMLAnchorElement",elements:[{name:"HTMLButtonElement"},{name:"HTMLAnchorElement"}]}]}],raw:"Common.Event<React.SyntheticEvent<HTMLButtonElement | HTMLAnchorElement>>"},description:""},title:{required:!1,tsType:{name:"string"},description:""}}}},"./src/Modal/consts.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>SIZES,q:()=>CLOSE_BUTTON_DATA_TEST});let SIZES=function(SIZES){return SIZES.EXTRASMALL="extraSmall",SIZES.SMALL="small",SIZES.NORMAL="normal",SIZES.LARGE="large",SIZES.EXTRALARGE="extraLarge",SIZES}({});const CLOSE_BUTTON_DATA_TEST="ModalCloseButton"},"./src/Modal/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>src_Modal});var react=__webpack_require__("../../node_modules/react/index.js"),clsx=__webpack_require__("../../node_modules/clsx/dist/clsx.mjs"),ModalContext=__webpack_require__("./src/Modal/ModalContext.tsx"),ModalCloseButton=__webpack_require__("./src/Modal/ModalCloseButton/index.tsx"),consts=__webpack_require__("./src/Modal/consts.ts"),useRandomId=__webpack_require__("./src/hooks/useRandomId/index.ts"),useMediaQuery=__webpack_require__("./src/hooks/useMediaQuery/index.ts"),useFocusTrap_consts=__webpack_require__("./src/hooks/useFocusTrap/consts.ts");const hooks_usePrevious=value=>{const ref=react.useRef(void 0);return react.useEffect((()=>{ref.current=value})),ref.current};var useLockScrolling=__webpack_require__("./src/hooks/useLockScrolling/index.ts"),useTheme=__webpack_require__("./src/hooks/useTheme/index.ts");const maxWidthClasses={[consts.F.EXTRASMALL]:"max-w-modal-extra-small",[consts.F.SMALL]:"max-w-modal-small",[consts.F.NORMAL]:"max-w-modal-normal",[consts.F.LARGE]:"max-w-modal-large",[consts.F.EXTRALARGE]:"max-w-modal-extra-large",largeMobile:{[consts.F.EXTRASMALL]:"lm:max-w-modal-extra-small",[consts.F.SMALL]:"lm:max-w-modal-small",[consts.F.NORMAL]:"lm:max-w-modal-normal",[consts.F.LARGE]:"lm:max-w-modal-large",[consts.F.EXTRALARGE]:"lm:max-w-modal-extra-large"},footer:{[consts.F.EXTRASMALL]:"lm:[&_.orbit-modal-footer]:max-w-modal-extra-small",[consts.F.SMALL]:"lm:[&_.orbit-modal-footer]:max-w-modal-small",[consts.F.NORMAL]:"lm:[&_.orbit-modal-footer]:max-w-modal-normal",[consts.F.LARGE]:"lm:[&_.orbit-modal-footer]:max-w-modal-large",[consts.F.EXTRALARGE]:"lm:[&_.orbit-modal-footer]:max-w-modal-extra-large"}},Modal=({size=consts.F.NORMAL,scrollingElementRef,children,onClose,triggerRef,fixedFooter=!1,isMobileFullPage=!1,preventOverlayClose=!1,onScroll,hasCloseButton=!0,mobileHeader=!0,disableAnimation=!1,dataTest,id,labelClose="Close",lockScrolling=!0,ariaLabel,ariaLabelledby,ariaDescribedby,ref})=>{const[loaded,setLoaded]=react.useState(!1),[scrolled,setScrolled]=react.useState(!1),[fullyScrolled,setFullyScrolled]=react.useState(!1),[hasModalTitle,setHasModalTitle]=react.useState(!1),[hasModalDescription,setHasModalDescription]=react.useState(!1),[hasModalSection,setHasModalSection]=react.useState(!1),[clickedModalBody,setClickedModalBody]=react.useState(!1),[fixedClose,setFixedClose]=react.useState(!1),[modalWidth,setModalWidth]=react.useState(0),[footerHeight,setFooterHeight]=react.useState(0),focusableElements=react.useRef([]),modalContent=react.useRef(null),modalBody=react.useRef(null),modalTitleID=(0,useRandomId.Ay)(),modalDescriptionID=(0,useRandomId.Ay)(),theme=(0,useTheme.A)(),{isLargeMobile}=(0,useMediaQuery.A)(),scrollingElement=react.useRef(null),setScrollingElementRefs=react.useCallback((node=>{scrollingElement.current=node,scrollingElementRef&&("function"==typeof scrollingElementRef?scrollingElementRef(node):scrollingElementRef.current=node)}),[scrollingElementRef]);(0,useLockScrolling.A)(scrollingElement,lockScrolling,[isLargeMobile]);const modalContentRef=react.useCallback((node=>{modalContent.current=node,isLargeMobile||setScrollingElementRefs(node)}),[isLargeMobile,setScrollingElementRefs]),modalBodyRef=react.useCallback((node=>{modalBody.current=node,isLargeMobile&&setScrollingElementRefs(node)}),[isLargeMobile,setScrollingElementRefs]),prevChildren=hooks_usePrevious(children),setDimensions=()=>{const content=modalContent.current;if(!content)return;const footerEl=content.querySelector(".orbit-modal-footer"),contentDimensions=content.getBoundingClientRect();setModalWidth(contentDimensions.width),footerEl?.clientHeight&&setFooterHeight(footerEl.clientHeight)},decideFixedFooter=()=>{if(!modalContent.current||!modalBody.current)return;const content=modalContent.current,body=modalBody.current,contentHeight=content.scrollHeight>content.offsetHeight+40?content.offsetHeight:content.scrollHeight;setFullyScrolled(contentHeight+40-body.scrollTop<=window.innerHeight)};react.useEffect((()=>{const findFocusableElements=()=>Array.from(modalContent.current?.querySelectorAll(useFocusTrap_consts.A)||[]);if(focusableElements.current=findFocusableElements(),focusableElements.current.length&&focusableElements.current[0].focus(),!modalContent.current)return;const observer=new MutationObserver((()=>{focusableElements.current=findFocusableElements()}));return observer.observe(modalContent.current,{childList:!0,subtree:!0}),()=>{observer.disconnect()}}),[]);const setScrollStates=(target,fullScrollOffset,fixCloseOffset,scrollBegin,mobile)=>{const content=modalContent.current;if(!content)return;const{height:contentHeight}=content.getBoundingClientRect(),scrollHeight=!mobile&&target.scrollHeight>contentHeight+80?contentHeight+80:target.scrollHeight;setScrolled(target.scrollTop>=Number(scrollBegin)+(mobile?0:target.scrollTop)),setFixedClose(target.scrollTop>=fixCloseOffset),setFullyScrolled(fixedFooter&&target.scrollTop>=scrollHeight-target.clientHeight-fullScrollOffset)},getScrollTopPoint=mobile=>{const content=modalContent.current;if(!content)return null;const headingEl=content.querySelector(".orbit-modal-heading");if(headingEl){const{top}=headingEl.getBoundingClientRect();return top}if(mobile)return 40;const{top}=content.getBoundingClientRect();return top},callContextFunctions=react.useCallback((()=>{setDimensions(),decideFixedFooter()}),[]),getScrollPosition=()=>scrollingElement.current?scrollingElement.current.scrollTop:null,setScrollPosition=value=>{scrollingElement.current&&(scrollingElement.current.scrollTop=value)};react.useImperativeHandle(ref,(()=>({getScrollPosition,setScrollPosition,modalBody,modalContent}))),react.useEffect((()=>{if(!disableAnimation){const timer=setTimeout((()=>{setLoaded(!0),decideFixedFooter(),setDimensions()}),15);return()=>{clearTimeout(timer)}}decideFixedFooter(),setDimensions()}),[]),react.useEffect((()=>{const handleResize=()=>{setDimensions(),decideFixedFooter()};return window.addEventListener("resize",handleResize),()=>{window.removeEventListener("resize",handleResize)}}),[]),react.useEffect((()=>{children!==prevChildren&&(decideFixedFooter(),setDimensions())}),[children,prevChildren]),react.useEffect((()=>()=>{triggerRef?.current?.focus()}),[triggerRef]);const hasCloseContainer=mobileHeader&&(hasModalTitle||onClose&&hasCloseButton),value=react.useMemo((()=>({setHasModalTitle,setHasModalDescription,setHasModalSection:()=>setHasModalSection(!0),removeHasModalSection:()=>setHasModalSection(!1),callContextFunctions,setFooterHeight,hasModalSection,hasMobileHeader:mobileHeader,isMobileFullPage,closable:Boolean(onClose),isInsideModal:!0,titleID:modalTitleID,descriptionID:modalDescriptionID})),[callContextFunctions,hasModalSection,isMobileFullPage,mobileHeader,onClose,modalTitleID,modalDescriptionID]),cssVars={...isLargeMobile?{"--orbit-modal-footer-height":fixedFooter?`${footerHeight}px`:"0"}:{maxHeight:isMobileFullPage?"100%":`calc(100% - ${theme.orbit.space800} - ${fixedFooter&&Boolean(footerHeight)?footerHeight:0}px)`,bottom:`${(isMobileFullPage?0:parseInt(theme.orbit.space800,10))+(fixedFooter&&Boolean(footerHeight)?footerHeight:0)}px`},"--orbit-modal-width":`${modalWidth}px`};return react.createElement("div",{className:(0,clsx.A)("orbit-modal-body","z-overlay font-base fixed inset-0 box-border size-full overflow-x-hidden outline-none",!isMobileFullPage&&"bg-[black]/50","lm:overflow-y-auto lm:p-1000 lm:bg-[black]/50"),tabIndex:-1,onKeyDown:event=>{onClose&&"Escape"===event.key&&(event.stopPropagation(),onClose(event));const firstElement=focusableElements.current[0],lastElement=focusableElements.current[focusableElements.current.length-1];"Tab"===event.key&&(event.shiftKey?document.activeElement===firstElement&&(event.preventDefault(),lastElement.focus()):document.activeElement===lastElement&&(event.preventDefault(),firstElement.focus()))},onScroll:event=>{event.target instanceof HTMLDivElement&&event.target===modalBody.current&&(onScroll&&onScroll(event),setScrollStates(event.target,40,40,getScrollTopPoint()))},onClick:event=>{onClose&&!1===preventOverlayClose&&!clickedModalBody&&modalContent.current&&event.target instanceof Element&&!modalContent.current.contains(event.target)&&event.target.className&&/orbit-modal-wrapper|orbit-modal-body/.test(event.target.className)&&onClose&&onClose(event),setClickedModalBody(!1)},"data-test":dataTest,id,ref:modalBodyRef,role:"dialog","aria-modal":"true","aria-label":ariaLabel,"aria-labelledby":ariaLabelledby||(hasModalTitle?modalTitleID:void 0),"aria-describedby":ariaDescribedby||(hasModalDescription?modalDescriptionID:void 0)},react.createElement("div",{className:(0,clsx.A)("orbit-modal-wrapper","fixed mx-auto my-0 box-border flex min-h-full w-full items-start",disableAnimation?!isMobileFullPage&&"top-800":["duration-normal transition-[top] ease-in-out",loaded?!isMobileFullPage&&"top-800":"top-full"],"lm:relative lm:top-0 lm:items-center",maxWidthClasses.largeMobile[size])},react.createElement("div",{className:(0,clsx.A)("orbit-modal-wrapper-content","lm:rounded-modal lm:overflow-visible overflow-y-auto overflow-x-hidden","font-base bg-elevation-flat shadow-level4 absolute box-border w-full","lm:relative lm:bottom-auto lm:pb-0","lm:[&_.orbit-modal-section:last-of-type]:pb-1000 lm:[&_.orbit-modal-section:last-of-type:after]:content-none lm:[&_.orbit-modal-section:last-of-type]:mb-[var(--orbit-modal-footer-height,0px)]","lm:[&_.orbit-modal-mobile-header]:w-[calc(var(--orbit-modal-width)-48px-theme(spacing.1000))]","lm:[&:has(.orbit-modal-header-container:last-child)]:pb-1000",footerHeight&&"lm:[&_.orbit-modal-section]:rounded-b-none",!hasModalSection&&"[&_.orbit-modal-header-container]:mb-800 lm:[&_.orbit-modal-header-container]:mb-[var(--orbit-modal-footer-height,0px)]",isMobileFullPage?"top-0 max-h-full":["rounded-t-modal",scrolled&&"[&_.orbit-modal-mobile-header]:rounded-tl-modal",scrolled&&"[&_.orbit-modal-mobile-header]:top-800"],fixedFooter&&footerHeight&&["[&_.orbit-modal-footer]:p-400 [&_.orbit-modal-footer]:fixed [&_.orbit-modal-footer]:bottom-0","[&_.orbit-modal-footer]:duration-fast [&_.orbit-modal-footer]:transition-shadow [&_.orbit-modal-footer]:ease-in-out",fullyScrolled?"[&_.orbit-modal-footer]:shadow-modal-scrolled":"[&_.orbit-modal-footer]:shadow-modal lm:[&_.orbit-modal-footer]:rounded-b-none","[&_.orbit-modal-section:last-of-type]:pb-600 [&_.orbit-modal-section:last-of-type]:mb-0"],fixedFooter?["lm:[&_.orbit-modal-footer]:!p-800",fullyScrolled&&"lm:[&_.orbit-modal-footer]:absolute"]:"lm:[&_.orbit-modal-footer]:p-800",fullyScrolled&&"lm:[&_.orbit-modal-footer]:shadow-none",scrolled?["[&_.orbit-modal-mobile-header]:visible [&_.orbit-modal-mobile-header]:opacity-100","lm:[&_.orbit-modal-mobile-header]:top-0"]:"lm:[&_.orbit-modal-mobile-header]:-top-1000",modalWidth?"lm:[&_.orbit-modal-footer]:max-w-[var(--orbit-modal-width)]":maxWidthClasses.footer[size]),style:cssVars,onScroll:event=>{onScroll&&onScroll(event),event.target instanceof HTMLDivElement&&event.target===modalContent.current&&setScrollStates(event.target,10,1,getScrollTopPoint(!0),!0)},ref:modalContentRef,onMouseDown:()=>{setClickedModalBody(!0)}},hasCloseContainer&&react.createElement("div",{className:(0,clsx.A)("z-overlay h-form-box-large pointer-events-none right-0 box-border flex w-full items-center justify-end","duration-fast transition-[shadow,_background-color] ease-in-out","lm:rounded-none",fixedClose||scrolled?"lm:top-0 lm:right-auto fixed":"absolute",isMobileFullPage||!fixedClose&&!scrolled?"top-0":"top-800",!isMobileFullPage&&"rounded-t-modal",modalWidth?"max-w-[var(--orbit-modal-width)]":maxWidthClasses[size],scrolled&&"shadow-fixed bg-white-normal","[&_+_.orbit-modal-section:first-of-type]:pt-1300 [&_+_.orbit-modal-section:first-of-type]:m-0 [&_+_.orbit-modal-section:first-of-type]:border-t-0","[&_.orbit-button-primitive]:me-100 [&_.orbit-button-primitive]:pointer-events-auto","[&_.orbit-button-primitive_svg]:duration-fast [&_.orbit-button-primitive_svg]:text-ink-normal [&_.orbit-button-primitive_svg]:transition-[color] [&_.orbit-button-primitive_svg]:ease-in-out","[&_.orbit-button-primitive:hover_svg]:text-ink-light-hover [&_.orbit-button-primitive:active_svg]:text-ink-light-active"),"data-test":"CloseContainer"},onClose&&hasCloseButton&&react.createElement(ModalCloseButton.A,{onClick:onClose,dataTest:consts.q,title:labelClose})),react.createElement(ModalContext.Vs.Provider,{value},children))))},src_Modal=Modal;Modal.__docgenInfo={description:"",methods:[{name:"getScrollPosition",docblock:null,modifiers:[],params:[],returns:null},{name:"setScrollPosition",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null}],displayName:"Modal",props:{size:{required:!1,tsType:{name:"union",raw:'"extraSmall" | "small" | "normal" | "large" | "extraLarge"',elements:[{name:"literal",value:'"extraSmall"'},{name:"literal",value:'"small"'},{name:"literal",value:'"normal"'},{name:"literal",value:'"large"'},{name:"literal",value:'"extraLarge"'}]},description:"",defaultValue:{value:"SIZES.NORMAL",computed:!0}},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},triggerRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLElement | null>",elements:[{name:"union",raw:"HTMLElement | null",elements:[{name:"HTMLElement"},{name:"null"}]}]},description:""},lockScrolling:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},scrollingElementRef:{required:!1,tsType:{name:"ReactRef",raw:"React.Ref<HTMLElement | null>",elements:[{name:"union",raw:"HTMLElement | null",elements:[{name:"HTMLElement"},{name:"null"}]}]},description:""},onClose:{required:!1,tsType:{name:"Common.Event",elements:[{name:"union",raw:"| React.KeyboardEvent<HTMLDivElement>\n| React.SyntheticEvent<HTMLButtonElement | HTMLDivElement | HTMLAnchorElement>",elements:[{name:"ReactKeyboardEvent",raw:"React.KeyboardEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},{name:"ReactSyntheticEvent",raw:"React.SyntheticEvent<HTMLButtonElement | HTMLDivElement | HTMLAnchorElement>",elements:[{name:"union",raw:"HTMLButtonElement | HTMLDivElement | HTMLAnchorElement",elements:[{name:"HTMLButtonElement"},{name:"HTMLDivElement"},{name:"HTMLAnchorElement"}]}]}]}],raw:"Common.Event<\n  | React.KeyboardEvent<HTMLDivElement>\n  | React.SyntheticEvent<HTMLButtonElement | HTMLDivElement | HTMLAnchorElement>\n>"},description:""},fixedFooter:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onScroll:{required:!1,tsType:{name:"Common.Event",elements:[{name:"ReactUIEvent",raw:"React.UIEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]}],raw:"Common.Event<React.UIEvent<HTMLDivElement>>"},description:""},mobileHeader:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},isMobileFullPage:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},preventOverlayClose:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},disableAnimation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},ariaLabel:{required:!1,tsType:{name:"string"},description:""},ariaLabelledby:{required:!1,tsType:{name:"string"},description:""},ariaDescribedby:{required:!1,tsType:{name:"string"},description:""},hasCloseButton:{defaultValue:{value:"true",computed:!1},required:!1},labelClose:{defaultValue:{value:'"Close"',computed:!1},required:!1}}}}}]);